# æ•°æ®åº“é›†æˆå®æ–½è®¡åˆ’

## ğŸ¯ ç›®æ ‡

1. å°†å­¦ç”Ÿé¢è¯•æ•°æ®ï¼ˆè§†é¢‘ã€é‚®ç®±ã€æ—¶é—´ç­‰ï¼‰å­˜å‚¨åˆ° Supabase æ•°æ®åº“
2. åˆ›å»ºå­¦æ ¡ç®¡ç†é¡µé¢ï¼ŒæŸ¥çœ‹å’Œæ’­æ”¾æ‰€æœ‰å®Œæˆçš„é¢è¯•
3. å½“å‰é˜¶æ®µï¼šæ‰€æœ‰å­¦æ ¡å¯ä»¥æŸ¥çœ‹æ‰€æœ‰é¢è¯•ï¼ˆæœªåŒºåˆ†å­¦æ ¡ï¼‰

---

## ğŸ“‹ å®æ–½æ­¥éª¤

### âœ… ç¬¬ 1 æ­¥ï¼šæ•°æ®åº“è®¾è®¡å’Œè¿ç§»

**æ–‡ä»¶**: `supabase/migrations/001_create_interviews_table.sql`

**æ•°æ®åº“è¡¨ç»“æ„**:
```sql
interviews
â”œâ”€â”€ id (UUID, ä¸»é”®)
â”œâ”€â”€ created_at (æ—¶é—´æˆ³)
â”œâ”€â”€ updated_at (æ—¶é—´æˆ³)
â”œâ”€â”€ interview_id (æ–‡æœ¬, å”¯ä¸€, å®¢æˆ·ç«¯ç”Ÿæˆ)
â”œâ”€â”€ student_email (æ–‡æœ¬, å¿…éœ€)
â”œâ”€â”€ student_name (æ–‡æœ¬, å¯é€‰)
â”œâ”€â”€ video_url (æ–‡æœ¬, B2 è§†é¢‘ URL)
â”œâ”€â”€ subtitle_url (æ–‡æœ¬, B2 å­—å¹• JSON URL)
â”œâ”€â”€ total_duration (æ•°å€¼, ç§’)
â”œâ”€â”€ status (æ–‡æœ¬: completed, reviewing, scored)
â””â”€â”€ metadata (JSONB, æ‰©å±•å­—æ®µ)
```

**æ“ä½œ**:
1. ç™»å½• Supabase Dashboard: https://supabase.com/dashboard
2. é€‰æ‹©æ‚¨çš„é¡¹ç›®
3. è¿›å…¥ **SQL Editor**
4. æ‰§è¡Œ `supabase/migrations/001_create_interviews_table.sql`

---

### ğŸ”§ ç¬¬ 2 æ­¥ï¼šåˆ›å»ºæ•°æ®åº“æ“ä½œå‡½æ•°

**æ–‡ä»¶**: `app/actions/interviews.ts` (æ–°å»º)

åŠŸèƒ½ï¼š
- `saveInterview()` - ä¿å­˜é¢è¯•è®°å½•åˆ°æ•°æ®åº“
- `getInterviews()` - è·å–æ‰€æœ‰é¢è¯•åˆ—è¡¨
- `getInterviewById()` - æ ¹æ® ID è·å–å•ä¸ªé¢è¯•

---

### ğŸ“ ç¬¬ 3 æ­¥ï¼šä¿®æ”¹å­¦ç”Ÿé¢è¯•é¡µé¢

**æ–‡ä»¶**: `app/student/interview/page.tsx`

æ”¹åŠ¨ï¼š
1. æ·»åŠ é‚®ç®±è¾“å…¥è¡¨å•ï¼ˆåœ¨å¼€å§‹é¢è¯•å‰æˆ–å®Œæˆåï¼‰
2. åœ¨è§†é¢‘ä¸Šä¼ æˆåŠŸåï¼Œè°ƒç”¨ `saveInterview()` ä¿å­˜åˆ°æ•°æ®åº“
3. ä¼ é€’å­¦ç”Ÿé‚®ç®±ã€è§†é¢‘ URLã€å­—å¹• URL ç­‰ä¿¡æ¯

---

### ğŸ« ç¬¬ 4 æ­¥ï¼šåˆ›å»ºå­¦æ ¡ç®¡ç†é¡µé¢

**æ–‡ä»¶**: 
- `app/school/dashboard/page.tsx` (æ–°å»º)
- `components/school/interview-list.tsx` (æ–°å»º)

åŠŸèƒ½ï¼š
1. æ˜¾ç¤ºæ‰€æœ‰å®Œæˆçš„é¢è¯•åˆ—è¡¨ï¼ˆè¡¨æ ¼æˆ–å¡ç‰‡ï¼‰
2. æ˜¾ç¤ºå­¦ç”Ÿé‚®ç®±ã€é¢è¯•æ—¶é—´ã€æ—¶é•¿ç­‰ä¿¡æ¯
3. æä¾›"æ’­æ”¾"æŒ‰é’®ï¼Œè·³è½¬åˆ°è§†é¢‘æ’­æ”¾é¡µé¢

---

### ğŸ¬ ç¬¬ 5 æ­¥ï¼šé›†æˆè§†é¢‘æ’­æ”¾å™¨

**æ–‡ä»¶**: 
- `app/school/watch/page.tsx` (æ–°å»º)
- å¤ç”¨ç°æœ‰çš„ `components/video-player-with-subtitles.tsx`

åŠŸèƒ½ï¼š
1. ä» URL å‚æ•°æˆ–æ•°æ®åº“è·å–é¢è¯• ID
2. åŠ è½½è§†é¢‘å’Œå­—å¹• URL
3. ä½¿ç”¨ä»£ç†è·¯ç”±æ’­æ”¾è§†é¢‘ï¼ˆå·²æœ‰ï¼‰

---

### ğŸ§ª ç¬¬ 6 æ­¥ï¼šç«¯åˆ°ç«¯æµ‹è¯•

æµ‹è¯•æµç¨‹ï¼š
1. å­¦ç”Ÿå®Œæˆé¢è¯• â†’ è¾“å…¥é‚®ç®± â†’ æäº¤
2. æ£€æŸ¥ Supabase æ•°æ®åº“æ˜¯å¦æœ‰æ–°è®°å½•
3. è®¿é—®å­¦æ ¡ç®¡ç†é¡µé¢
4. éªŒè¯èƒ½å¦çœ‹åˆ°æ–°é¢è¯•è®°å½•
5. ç‚¹å‡»æ’­æ”¾ï¼ŒéªŒè¯è§†é¢‘èƒ½å¦æ­£å¸¸æ’­æ”¾

---

## ğŸ—„ï¸ æ•°æ®æµå›¾

```
å­¦ç”Ÿå½•åˆ¶é¢è¯•
    â†“
åˆå¹¶è§†é¢‘ (FFmpeg)
    â†“
ä¸Šä¼ åˆ° B2 (è§†é¢‘ + å­—å¹•)
    â†“
ä¿å­˜è®°å½•åˆ° Supabase â† ã€æ–°å¢ã€‘
    â†“
å­¦æ ¡ Dashboard æŸ¥è¯¢æ•°æ®åº“ â† ã€æ–°å¢ã€‘
    â†“
æ˜¾ç¤ºé¢è¯•åˆ—è¡¨ + æ’­æ”¾å™¨ â† ã€æ–°å¢ã€‘
```

---

## ğŸ”‘ ç¯å¢ƒå˜é‡

ç¡®ä¿ `.env.local` åŒ…å« Supabase é…ç½®ï¼š

```env
# Supabase
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key

# B2 (å·²æœ‰)
B2_BUCKET_NAME=...
B2_BUCKET_REGION=...
B2_APPLICATION_KEY_ID=...
B2_APPLICATION_KEY=...
```

**Vercel éƒ¨ç½²**ï¼šä¹Ÿéœ€è¦åœ¨ Vercel Dashboard â†’ Settings â†’ Environment Variables ä¸­æ·»åŠ è¿™ä¸¤ä¸ª Supabase å˜é‡ã€‚

---

## ğŸ“ æ–°å¢/ä¿®æ”¹çš„æ–‡ä»¶æ¸…å•

### æ–°å»ºæ–‡ä»¶
- [ ] `supabase/migrations/001_create_interviews_table.sql`
- [ ] `app/actions/interviews.ts`
- [ ] `app/school/dashboard/page.tsx`
- [ ] `app/school/watch/page.tsx`
- [ ] `components/school/interview-list.tsx`

### ä¿®æ”¹æ–‡ä»¶
- [ ] `app/student/interview/page.tsx` - æ·»åŠ é‚®ç®±è¾“å…¥å’Œæ•°æ®åº“ä¿å­˜
- [ ] `app/actions/upload-video.ts` - å¯é€‰ï¼šè¿”å›æ›´å¤šä¿¡æ¯ä¾›æ•°æ®åº“ä¿å­˜

---

## ğŸš€ ä¸‹ä¸€æ­¥æ“ä½œ

1. **ç«‹å³æ‰§è¡Œ**ï¼šåœ¨ Supabase è¿è¡Œæ•°æ®åº“è¿ç§»
2. **å¼€å‘é¡ºåº**ï¼š
   - å…ˆåˆ›å»ºæ•°æ®åº“æ“ä½œå‡½æ•°ï¼ˆ`app/actions/interviews.ts`ï¼‰
   - ç„¶åä¿®æ”¹å­¦ç”Ÿé¢è¯•é¡µé¢
   - æœ€ååˆ›å»ºå­¦æ ¡ç®¡ç†é¡µé¢

---

## ğŸ’¡ æœªæ¥æ‰©å±•ï¼ˆä¸åœ¨å½“å‰èŒƒå›´ï¼‰

- å­¦æ ¡-å­¦ç”Ÿå…³è”ï¼ˆå¤šå¯¹å¤šå…³ç³»ï¼‰
- æ•™å¸ˆè´¦å·å’Œæƒé™ç®¡ç†
- é¢è¯•è¯„åˆ†åŠŸèƒ½
- å¯¼å‡ºé¢è¯•æ•°æ®
- æ‰¹é‡æ“ä½œï¼ˆåˆ é™¤ã€å½’æ¡£ç­‰ï¼‰

---

## ğŸ› ï¸ å¼€å‘åˆ†æ”¯

å½“å‰åˆ†æ”¯ï¼š`feature/database-integration`

å®Œæˆååˆå¹¶åˆ° `main` å‰éœ€è¦ï¼š
1. æœ¬åœ°æµ‹è¯•é€šè¿‡
2. Preview ç¯å¢ƒéƒ¨ç½²æµ‹è¯•
3. Code Reviewï¼ˆå¯é€‰ï¼‰

